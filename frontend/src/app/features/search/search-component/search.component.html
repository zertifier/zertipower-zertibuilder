<app-navbar></app-navbar>
<div class="row px-4 container-flex">

  <div class="col-12 col-md-8 p-2">
    <app-map></app-map>
    <div *ngIf="map">
      <button (click)="multipleSelection()"  data-toggle="button" type="button" [ngClass]="map.multipleSelection ? 'btn btn-dark mt-2 active' : 'btn btn-dark mt-2'">Selecció múltiple</button>
    </div>
    
  </div>

  <div class="col-12 col-md-4 p-2">

    <!-- <div class="mb-2">
      <label for="cups">cups</label>
      <input id="cups" placeholder="CUPS" type="number" class="form-control">
    </div>

    <div class="mb-2">
      <label for="consum">consum</label>
      <input id="consum" placeholder="consum" type="number" class="form-control">
    </div> -->

    <div class="mb-2">

      <label for="location" class="my-2">Municipi</label>
      <select id="location" [(ngModel)]="selectedLocation" class="form-select px-2" (change)="OnSelectorChange(selectedLocation,'location')">
        <option></option>
        <option *ngFor="let location of locations" [ngValue]="location">{{location.municipality}}</option>
      </select>

      <label for="location-comunnity" class="my-2">Comunitats del municipi</label>
      <select id="location-comunnity" [(ngModel)]="selectedCommunity" class="form-select px-2" (change)="OnSelectorChange(selectedCommunity,'community')">
        <option></option>
        <option *ngFor="let community of selectedCommunities" [ngValue]="community">{{community.name}}</option>
      </select>

      <div *ngIf="selectedEnergyArea">
        <div class="my-2">Referencia cadastral</div>
        <input id="" placeholder="referència cadastral" type="text" class="form-control" disabled readonly value="{{selectedEnergyArea.cadastral_reference}}">
        <div class="my-2">m2</div>
        <input id="" placeholder="m2" type="text" class="form-control" disabled readonly value="{{selectedEnergyArea.m2 || 0}}">
        <div class="my-2">número de plaques</div>
        <input id="" placeholder="número de plaques" type="text" class="form-control" disabled readonly value="{{selectedEnergyArea.n_plaques || nPlaquesCalc}}">
        <div class="my-2">Producció mensual</div>
        <!-- <input id="" placeholder="produccio mensual" type="text" class="form-control" disabled readonly value="{{kwhMonth}}"> -->
        <app-chart [chartType]="monthChartType" [labels]="monthChartLabels" [datasets]="monthChartDatasets"
        [update]="updateMonthChart" [updateSubject]="updateMonthChartSubject.asObservable()"></app-chart>


      </div>

      
      

      <!-- <label for="comunitat" class="my-2">Comunitat energética</label>
      <select id="comunitat" [(ngModel)]="selectedCommunity" class="form-select px-2" (change)="OnSelectorChange(selectedCommunity,'community')">
        <option></option>
        <option *ngFor="let community of communities" [ngValue]="community">{{community.name}}</option>
      </select> -->

      <!-- <label for="comunitat" class="my-2">comunitat</label>
      <div *ngIf="selectedCommunity">
        <input id="comunitat" placeholder="comunitat" type="text" class="form-control" disabled readonly  [ngModel]="selectedCommunity['name']">
      </div>
      <div *ngIf="!selectedCommunity">
        <input id="nom de comunitat" placeholder="comunitat" type="text" class="form-control" disabled readonly>
      </div> -->
    </div>

  </div>
</div>

